import{r as a,j as t,a as A,b as B,F as M,B as k,h as E,c as ae,I as R,q as z,v as ne,S as re,p as le,d as ie,w as U,u as ce,g as W,s as me,P as $,U as de}from"./index-501849c6.js";const je=e=>{const[o,i]=a.useState(),[l,p]=a.useState();a.useLayoutEffect(()=>{const[n,s,...u]=a.Children.toArray(e.children);n&&s?((n==null?void 0:n.type)==="div"?i(n):c({which:"d0",type:`${n.type||n}`}),(s==null?void 0:s.type)==="div"?p(s):c({which:"d1",type:`${s.type||s}`})):c({which:"both",type:`${n} & ${s}`}),u.length>0&&console.error("Only 2 <div> elements can be shown in SidePanel - header and body. Passing more elements will not cause it to display more.")},[e]);const c=n=>{switch(n.which){case"d0":i(void 0),console.error(`First element passed as child (${n.type}) is not a <div> element. Pass only <div> elements into SidePanel.`);break;case"d1":p(void 0),console.error(`Second element passed as child (${n.type}) is not a <div> element. Pass only <div> elements into SidePanel.`);break;case"both":i(void 0),p(void 0),console.error(`Both children passed into SidePanel (${(n==null?void 0:n.type)||n}) must be <div> elements.`);break}};return t(A,{children:t("div",{className:`side-panel side-panel--${e.for} flex flex-col bg-white justify-between h-auto `,children:[t("div",{className:"w-full side-top",children:o},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/common/SidePanel.tsx",lineNumber:65,columnNumber:9},globalThis),t("div",{className:"w-full side-bottom",children:l},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/common/SidePanel.tsx",lineNumber:66,columnNumber:9},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/common/SidePanel.tsx",lineNumber:64,columnNumber:7},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/common/SidePanel.tsx",lineNumber:63,columnNumber:5},globalThis)},ue=e=>{const[o,i]=a.useState(!1),[l,p]=a.useState([]);a.useEffect(()=>{p(e.options);const n=e.options.findIndex((s,u)=>s.value===!0);if(n>-1){const s=e.options[n];e.changeFn(s==null?void 0:s.value)}},[e]);const c=n=>{const s=[...l];s.forEach(u=>{u.value===n.value&&(u.checked=!u.checked)}),p(s),e.changeFn(s)};return t("div",{className:"relative pt-[20px] w-full",children:[t("h1",{className:" pb-2 app_input_checkbox_title ",children:e.label&&t(A,{children:[e.label,e.required?" *":""]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputCheckbox.tsx",lineNumber:62,columnNumber:11},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputCheckbox.tsx",lineNumber:60,columnNumber:7},globalThis),t("div",{className:` w-full ${e.orientation==="horizontal"?"flex gap-5":""}`,onFocus:()=>i(!0),onBlur:()=>i(!1),children:l==null?void 0:l.map((n,s)=>{const u=`${s}-${n.value}`;return t("div",{className:"my-1 flex  items-center justify-start h-10 w-[90%]",children:[t("input",{tabIndex:0,id:u,type:"checkbox",name:e.name,checked:n.checked,value:n.value||"[not defined]",onChange:()=>c(n),className:"app_input_checkbox peer",required:e.required,disabled:e.disabled||n.notselectable||!n.customWrite&&!n.value},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputCheckbox.tsx",lineNumber:79,columnNumber:15},globalThis),t("label",{htmlFor:u,className:` app_input_label_option_checkbox min-w-[100px] Xtext-ellipsis Xoverflow-hidden Xwhitespace-nowrap 
                ${e.required?"after:pl-1":""}`,children:n.label},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputCheckbox.tsx",lineNumber:92,columnNumber:15},globalThis)]},u,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputCheckbox.tsx",lineNumber:76,columnNumber:13},globalThis)})},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputCheckbox.tsx",lineNumber:68,columnNumber:7},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputCheckbox.tsx",lineNumber:59,columnNumber:5},globalThis)},pe=({submitFn:e,whatAction:o,extraActionCheck:i,closeOnSuccess:l,irreversible:p})=>{const{hidePopup:c}=B(),[n,s]=a.useState(!1),u=()=>{e(n),l&&c()};return t(M,{title:"",tailwindStyles:"w-[500px] min-h-[200px]",children:[t("div",{className:"flex flex-col w-full",children:t("p",{className:"text-center",children:[`Are you sure you want to do this ${o?"("+o+")":""}?`," "]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:30,columnNumber:9},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:29,columnNumber:7},globalThis),i&&t("div",{className:"w-full flex-col app_flex_center my-2 bg-gray-200 rounded-md p-3",children:[t("p",{className:"w-full uppercase text-[12px] ",children:i},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:35,columnNumber:11},globalThis),t(ue,{label:"Check",changeFn:x=>s(x[0].checked),name:"extra-action",options:[{value:"opt-in",label:"opt-in",checked:n}],tailwindStyles:""},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:36,columnNumber:11},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:34,columnNumber:9},globalThis),p&&t("p",{className:"text-red-500 text-center text-[15px] font-bold my-2",children:"This action is irreversible. "},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:46,columnNumber:24},globalThis),t(k,{clickFn:u,label:"Submit",formStyle:"primary"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:48,columnNumber:7},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/common/ConfirmDialog.tsx",lineNumber:26,columnNumber:5},globalThis)};function be(e,o){a.useEffect(()=>{function i(l){l.target&&e.current&&!e.current.contains(l.target)&&o(l)}return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[e])}const L=e=>{var d;const[o,i]=a.useState(!1),[l,p]=a.useState(!1),[c,n]=a.useState(),s=a.useRef(E(e.name,"select")).current,u=a.useRef(null),[x,T]=a.useState(!1),[w,v]=a.useState(""),[j,S]=a.useState("");a.useEffect(()=>{var f;const m=N=>{if(N.key==="Enter"){const P=N.target.dataset.index||-1,C=e.options[P];C&&y(C),l||p(!0)}};return(f=u.current)==null||f.addEventListener("keydown",m),()=>{var N;return(N=u.current)==null?void 0:N.removeEventListener("keydown",m)}},[u.current]),a.useEffect(()=>{const m=e.options.find(f=>f.customWrite);m&&S(m.prefix||"")},[e.options]),a.useEffect(()=>{n(e.options.find(m=>e.value===m.value))},[e.value]),be(u,m=>{var f;i(!1),p(!1),(f=u.current)==null||f.blur()});const y=m=>{n(m),e.changeFn(m.value),p(!1),T(!!m.customWrite)},F=()=>{var m;e.disabled||(i(!0),p(!l),(m=u.current)==null||m.focus())},I=m=>{const f=`${j}${m}`;v(m),e.changeFn(f)};return t("div",{ref:u,className:`app_flex_center  relative mb-8  app_input_top h-[40px] min-w-[150px] w-[fit-content] ${e.disabled&&"app_input_disabled"} ${e.tailwindStyles}`,onClick:F,children:[t("div",{tabIndex:0,autoFocus:!!e.focus,id:s,className:`app_input peer ${o?"border-b-app_tertiary":""}   bg-transparent  px-1 my-1 ${e.selectWidth}`,children:[t("div",{className:"relative h-full flex items-center align-middle justify-between select-none text-[14px]",children:[t("span",{className:`${c==null?void 0:c.iconClass}`,children:(c==null?void 0:c.label)??"Select"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:96,columnNumber:11},globalThis),t(ae.MdUnfoldMore,{className:"text-gray-700 transition-all duration-400 text-[18px] "},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:97,columnNumber:11},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:95,columnNumber:9},globalThis),t("div",{className:` z-10 absolute  transition-all duration-400 
          ${l?"max-h-[155px]":" max-h-0"} overflow-y-auto bg-white
          top-[112%] w-full  left-0 rounded-[3px]  drop-shadow-xl  `,children:(d=e.options)==null?void 0:d.map(({label:m,value:f,iconClass:N,customWrite:P},C)=>t("div",{autoFocus:!0,tabIndex:0,"data-index":C,id:`${C}`,onClick:()=>y({label:m,value:f,iconClass:N,customWrite:P}),className:` px-3 py-[5px]  overflow-hidden select-none text-[14px] ${f===(c==null?void 0:c.value)?"bg-app_tertiary text-white font-[500] select-active-option":"text-gray-600 hover:bg-app_tertiary_light hover:overflow-hidden"}`,children:t("span",{className:` ${f===(c==null?void 0:c.value),""}flex items-center align-middle justify-between  ${N}`,children:m},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:116,columnNumber:15},globalThis)},C,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:104,columnNumber:13},globalThis))},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:99,columnNumber:9},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:90,columnNumber:7},globalThis),x&&t(R,{required:!0,type:"text",name:"",changeFn:m=>I(m),label:"Write custom role",value:w,autoComplete:"on",tailwindStyles:"ml-5 max-w-[150px] w-[150px]",disabled:e.disabled},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:127,columnNumber:9},globalThis),t("label",{htmlFor:s,className:` app_input_label ${e.required?"required after:pl-1":""}`,children:e.label},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:139,columnNumber:7},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/basic-inputs/InputSelect.tsx",lineNumber:84,columnNumber:5},globalThis)};function X(e=0){return 36+e*7.8}const fe=({deleteFn:e,item:o})=>{const[i,l]=a.useState("0px");return a.useEffect(()=>{var c;const p=X((c=o.value)==null?void 0:c.length);l(`${p}px`)},[o.value]),t("div",{id:"tag#"+o.temporaryId,className:"app_tag_wrapper transition-all duration-200 tag flex relative",style:{width:i},children:t("div",{style:{width:i},className:"transition-all duration-200 absolute app_input_tags font-app_mono",onBlur:()=>{},children:[t("span",{className:"",children:o.value},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTag/InputTag.tsx",lineNumber:29,columnNumber:9},globalThis),t("div",{className:"tag-remove  ",children:t(z,{clickFn:e,relatedItemId:o.temporaryId,sizeVariant:"I"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTag/InputTag.tsx",lineNumber:32,columnNumber:11},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTag/InputTag.tsx",lineNumber:31,columnNumber:9},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTag/InputTag.tsx",lineNumber:25,columnNumber:7},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTag/InputTag.tsx",lineNumber:21,columnNumber:5},globalThis)},he=e=>{const o=a.useRef(E(e.name,e.name)).current,i=a.useRef(null),[l,p]=a.useState("0px"),[c,n]=a.useState([]),[s,u]=a.useState(),[x,T]=a.useState(!1);a.useEffect(()=>{T(!!e.disabled)},[e.disabled]),a.useEffect(()=>{n([...e.values])},[e.values]),a.useLayoutEffect(()=>{const d=X(s==null?void 0:s.value.length);p(`${d}px`)},[s==null?void 0:s.value]),a.useLayoutEffect(()=>{var m;const d=f=>{f.target.id===o&&!(s!=null&&s.temporaryId)&&!x&&w()};return(m=i.current)==null||m.addEventListener("click",d),()=>{var f;return(f=i.current)==null?void 0:f.removeEventListener("click",d)}},[i.current]);const w=()=>{if(!x){const d=E(e.name,"tag");u({temporaryId:d,value:""})}},v=d=>{s!=null&&s.temporaryId&&u({...s,value:d})},j=()=>{const d=[...c].filter(m=>m.value&&m.temporaryId);s!=null&&s.temporaryId&&s.value&&d.push({...s}),u(void 0),setTimeout(()=>{I([...d])},50)},S=d=>{switch(d.key){case",":case"Enter":j(),setTimeout(()=>{w()},200);break;case"Escape":u(void 0);break}},y=(d,m)=>{I([...c].filter(f=>f.temporaryId!==m))},F=d=>{u(void 0),I([])},I=d=>{n(d),e.changeFn(d)};return t("div",{id:o,ref:i,tabIndex:0,className:`${o} app_input_tags_wrapper   relative flex flex-wrap items-center content-start  justify-start my-5  min-h-[130px] min-w-[300px]  w-full border-[1px] border-solid border-gray-300
      ${e.label&&e.label.length>0&&"app_input_top"}
      ${!!(e!=null&&e.disabled)&&"bg-slate-300"}`,children:[c.length>0&&c.map((d,m)=>t(fe,{deleteFn:y,item:d},m,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:121,columnNumber:13},globalThis)),!x&&(s==null?void 0:s.temporaryId)&&t("div",{className:"app_new_tag_wrapper transition-all duration-200 tag flex relative min-w-[54px]",style:{width:l},children:t("input",{autoFocus:!0,style:{width:l},type:"text",value:s==null?void 0:s.value,minLength:1,maxLength:17,onKeyDown:S,onBlur:j,onChange:d=>v(d.currentTarget.value),className:`app_input_tags ${o} transition-all duration-200 absolute min-w-[45px] font-app_mono`},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:132,columnNumber:11},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:129,columnNumber:9},globalThis),!c.length&&!s&&t("div",{className:"tag absolute h-[32px] top-[8px] text-sm text-gray-300",onClick:w,children:"Click to add a tag..."},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:147,columnNumber:9},globalThis),e.label&&e.label.length>0&&t("label",{htmlFor:o,onClick:w,className:`${o} peer app_input_label top-[-30px] whitespace-nowrap ${e.required?"after:pl-1":""}`,children:e.label},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:154,columnNumber:9},globalThis),!!c.length&&t("div",{className:"tags-reset  ",children:t(z,{clickFn:F,sizeVariant:"II"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:164,columnNumber:11},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:163,columnNumber:9},globalThis),e.hint&&t("p",{className:`${o} absolute top-[0%] hidden text-[11px] text-gray-900 bg-gray-200 shadow-lg py-1 px-3 rounded-sm h-[40px] min-w-[200px] leading-[14px] peer-hover:flex peer-hover:z-20`,children:e.hint},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:172,columnNumber:9},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/forms/components/complex-inputs/InputTags/InputTags.tsx",lineNumber:111,columnNumber:5},globalThis)},ve=e=>{let o="";const{email:i}=e;if(e.names){const{name:l,lastname:p,nickname:c}=e.names;c.length>1?o=c.substring(0,2).toUpperCase():l&&p&&(o=`${l[0]}${p[0]}`)}return o||(o=i.substring(0,2).toUpperCase()),o},ge=e=>{const o=Object.values(ne),i={a_new:{},b_working:{},c_checking:{},d_done:{}};return re.forEach((l,p)=>{i[l]={id:l,statuses:o[p].statuses,tasksIdsOrdered:[]},e==="full"&&(i[l]={...i[l],tasks:[]})}),i},Ie=(e,o,i=[])=>{let l={id:o.id,statuses:o.statuses,tasksIdsOrdered:o.tasksIdsOrdered};return e==="full"&&(l={...l,tasks:[...i]}),l},Ce=(e,o)=>o.map(l=>({...l,assigneeDetails:e[l.assigneeId],statusDetails:le(l.status)})),Ne=e=>`${e.substring(0,1)}_${e.substring(15,16)}${e.substring(18,20)}_${e.substring(e.length-3)}`,Te=({project:e})=>{const{user:o}=ie(),[i,l]=a.useState(""),[p,c]=a.useState(""),[n,s]=a.useState([]),[u,x]=a.useState(U[0].value),[T,w]=a.useState(""),[v,j]=a.useState(),[S,y]=a.useState([]),[F,I]=a.useState(),[d,m]=a.useState("new"),{showPopup:f,hidePopup:N}=B(),P=ce(),[C,G]=a.useState(!1),[D,K]=a.useState();a.useEffect(()=>{if(d==="edit"&&e&&o){const r=U.find(({value:g})=>g===e.status)||U[0];x(r.value);const b=e.managerId,h=v==null?void 0:v.id;G(b!==h)}},[v]),a.useEffect(()=>{if(e){const{names:r,roleDetails:b,...h}=e.assigneesRegistry[e.managerId],g=h;m("edit"),l(e.title),j(g),w(e.id),c(e.description),s(e.tags.map(_=>({value:_,temporaryId:E("project-tags","tag")})))}else m("new"),w(`proj_${W()}`)},[e]),a.useLayoutEffect(()=>{var r;if(o){const b=J(o,e);y(b),d==="new"&&j(b[0].value),d==="edit"&&e&&j(((r=b.find(({value:h})=>h.id===`${e.managerId}`))==null?void 0:r.value)??void 0)}},[d,o]);const J=(r,b)=>{let h=[];return b?h=b.assignees.map(g=>({label:`${g.email}`,value:{...g,email:`${g.email}`}})):h=[{label:r.authentication.email,value:{id:r.authentication.id,email:r.authentication.email,role:"manager"}}],h},q=(r,b)=>{const{assigneesRegistry:h,...g}=r;f(t(pe,{submitFn:oe=>b==="delete"?H(g,oe):Q(g),whatAction:b==="delete"?"delete project and archive related tasks":"archive project and related tasks",irreversible:!0,extraActionCheck:b==="delete"?"what to do with tasks - only archive (not checked) or delete (checked)?":void 0,closeOnSuccess:!0},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:129,columnNumber:7},globalThis))},H=(r,b)=>{r&&$.deleteProjectCompletely(r,b).then(()=>I({text:"Project and tasks have been deleted. Users data updated.",isError:!1})).catch(h=>{console.error(h),I({isError:!0,text:"Error during deleting project. See console."})}).finally(()=>{P("/projects")})},Q=r=>{r&&$.archiveProjectCompletely(r).then(()=>I({text:"Project and tasks have been archived. Users data updated.",isError:!1})).catch(b=>{console.error(b),I({isError:!0,text:"Error during archiving project. See console."})}).finally(()=>{P("/projects")})},V=async()=>{const r=o==null?void 0:o.authentication.id;if(r&&v){const b=`sche_${W()}`,h={id:T,title:i,description:p,tags:[...n.map(_=>_.value)],originalCreatorId:r,managerId:v==null?void 0:v.id,productOwnerId:r,assignees:[v],tasksLists:{backlog:[],scheduleId:b},tasksCounter:0,status:u,archived:!1,createdAt:new Date().toISOString(),closedAt:""},g={id:b,projectId:h.id,columns:ge("simple")};ee(h,g,o)}},Y=async()=>{if(e&&v){const r={id:e.id,title:i,description:p,tags:[...n.map(b=>b.value)],originalCreatorId:e.originalCreatorId,productOwnerId:e.originalCreatorId||"",managerId:v==null?void 0:v.id,assignees:e.assignees,tasksLists:{...e.tasksLists},tasksCounter:e.tasksCounter,status:u,archived:!1,createdAt:e.createdAt,closedAt:""};u!=="active"&&(r.closedAt=new Date().toISOString()),Z(r)}},Z=async r=>{if(D&&e){const b=r.assignees.find(g=>g.id===e.managerId),h=r.assignees.find(g=>g.id===r.managerId);b&&h&&(b.role=D,h.role="manager")}$.updateProject(r).then(()=>{O(),N()},()=>{})},ee=async(r,b,h)=>{const g=[{fieldPath:"work.projectsIds",value:[...h.work.projectsIds,r.id]}];$.saveNewProject(r,b).then(()=>{O(),de.updateUserFieldsById(h.authentication.id,g).then(()=>{O(),N()},()=>{})})},te=()=>{d==="new"?V():Y()},se=()=>{w(`proj_${W()}`),j(void 0),l(""),c(""),s([])},O=()=>{l(""),c(""),s([])};return t(M,{title:`${d==="new"?"Create project":`Editing project: #${e==null?void 0:e.title}`}`,submitFn:V,tailwindStyles:"w-[500px] min-h-[600px] max-h-[900px]",children:[t("p",{className:" w-fit text-[10px] my-2 text-gray-500 font-app_mono flex items-end",children:Ne(T)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:295,columnNumber:7},globalThis),t(R,{required:!0,type:"text",name:"project-title",changeFn:r=>l(r),label:"Project Title",value:i,autoComplete:"on",tailwindStyles:"min-w-[250px] w-full"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:296,columnNumber:7},globalThis),t(L,{required:!0,name:"project-status",selectWidth:"w-[460px]",changeFn:r=>x(r),label:"Status",value:u,options:d==="edit"?U:[U[0]]},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:307,columnNumber:7},globalThis),t(R,{required:!0,type:"text",name:"project-name",changeFn:r=>c(r),label:"Project Description",value:p,autoComplete:"on",tailwindStyles:"min-w-[250px] w-full"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:317,columnNumber:7},globalThis),t(L,{required:!0,name:"manager",selectWidth:"w-[460px]",changeFn:r=>j(r),label:"Assign manager",value:v,options:S},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:328,columnNumber:7},globalThis),C&&t("div",{className:"h-[100px] max-h-fit",children:t(L,{required:C,name:"new-role",selectWidth:"w-[460px]",changeFn:r=>K(r),label:"New Role",value:D,options:me.filter(r=>!["manager","product_owner"].includes(r.value))},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:340,columnNumber:11},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:339,columnNumber:9},globalThis),t(he,{required:!0,name:"project-tags",changeFn:r=>s(r),label:"Tags",hint:"Tags could be used to describe project. They can describe main area(s), reasons, goals, contextual informations, used tools.",values:n,disabled:n.length===5},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:352,columnNumber:7},globalThis),t("div",{className:"flex w-full justify-center gap-3 items-center",children:[t(k,{clickFn:te,formStyle:"primary",disabled:!(i&&u&&p&&v),label:"Submit"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:363,columnNumber:9},globalThis),d==="new"&&t(k,{formStyle:"secondary",clickFn:se,children:"Clear"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:371,columnNumber:11},globalThis),d==="edit"&&t(A,{children:[t(k,{formStyle:"secondary",clickFn:()=>e&&q(e,"delete"),children:"Delete"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:380,columnNumber:13},globalThis),t(k,{formStyle:"secondary",clickFn:()=>e&&q(e,"archive"),children:"Archive"},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:385,columnNumber:13},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:379,columnNumber:11},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:362,columnNumber:7},globalThis)]},void 0,!0,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectForm/ProjectForm.tsx",lineNumber:291,columnNumber:5},globalThis)};const ye=({assignee:e,tailwindStyles:o})=>{const[i,l]=a.useState(),[p,c]=a.useState("");return a.useEffect(()=>{var n,s;if(e)if(e!=="..."){if(e.names){const u=ve({email:`${e.email}`,names:e.names});l(u)}(n=e.roleDetails)!=null&&n.styleClasses&&c(` assignee-icon ${(s=e.roleDetails)==null?void 0:s.styleClasses[1]}`)}else l(void 0)},[e]),t(A,{children:e&&t("div",{className:`icon-circle ${p} relative font-app_mono text-[10px] h-[25px] w-[25px]
       rounded-full app_flex_center border-2 border-white border-solid ${o}`,children:i?t("p",{className:"rounded-full h-[21px] w-[21px] text-center leading-[21px]",children:i},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectAssigneeIcon/ProjectAssigneeIcon.tsx",lineNumber:38,columnNumber:13},globalThis):t("p",{className:"rounded-full  tracking-[-1.5px]",children:"..."},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectAssigneeIcon/ProjectAssigneeIcon.tsx",lineNumber:40,columnNumber:13},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectAssigneeIcon/ProjectAssigneeIcon.tsx",lineNumber:34,columnNumber:9},globalThis)},void 0,!1,{fileName:"C:/Users/jabed/dev/web/todo-raptor/src/app/components/Projects/ProjectAssigneeIcon/ProjectAssigneeIcon.tsx",lineNumber:32,columnNumber:5},globalThis)};export{pe as C,L as I,Te as P,je as S,ye as a,he as b,ve as c,Ce as e,Ne as g,Ie as t};
